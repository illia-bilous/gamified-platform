<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gamified Learning Platform</title>
    <link rel="stylesheet" href="assets/css/styles.css"> 
    </head>
<body>

    <section id="screen-home" class="screen active">
        <div class="main-content center-content">
            <h1>–õ–∞—Å–∫–∞–≤–æ –ø—Ä–æ—Å–∏–º–æ –¥–æ –ì–µ–π–º—ñ—Ñ—ñ–∫–æ–≤–∞–Ω–æ—ó –ü–ª–∞—Ç—Ñ–æ—Ä–º–∏!</h1>
            <p>–û–±–µ—Ä—ñ—Ç—å —Å–≤–æ—é —Ä–æ–ª—å –¥–ª—è –≤—Ö–æ–¥—É –∞–±–æ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó.</p>
            <div class="button-group">
                <button id="btn-role-student" class="btn large primary">–Ø ‚Äî –£—á–µ–Ω—å</button>
                <button id="btn-role-teacher" class="btn large secondary">–Ø ‚Äî –í—á–∏—Ç–µ–ª—å</button>
            </div>

            <div style="margin-top: 30px; border-top: 1px solid #ccc; padding-top: 10px;">
                
            </div>
        </div>
    </section>

    <section id="screen-auth-choice" class="screen">
        <div class="main-content center-content">
            <button id="btn-back-to-home" class="btn back-btn">‚Üê –ù–∞–∑–∞–¥</button>
            <h2>–í—Ö—ñ–¥ –∞–±–æ –†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h2>
            <div class="button-group">
                <button id="btn-login" class="btn large primary">–í—Ö—ñ–¥</button>
                <button id="btn-register" class="btn large secondary">–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</button>
            </div>
        </div>
    </section>

    <section id="screen-login" class="screen">
        <div class="main-content auth-form-container">
            <button id="btn-back-auth1" class="btn back-btn">‚Üê –ù–∞–∑–∞–¥</button>
            <h2>–í—Ö—ñ–¥</h2>
            <form id="login-form" autocomplete="off">
                <label for="login-email">Email –∞–±–æ –õ–æ–≥—ñ–Ω —É—á–Ω—è:</label>
                <input type="text" id="login-email" required>

                <label for="login-pass">–ü–∞—Ä–æ–ª—å:</label>
                <input type="password" id="login-pass" required>

                <button type="button" id="login-submit" class="btn primary">–£–≤—ñ–π—Ç–∏</button>
            </form>
        </div>
    </section>

    <section id="screen-register" class="screen">
        <div class="main-content auth-form-container">
            <button id="btn-back-auth2" class="btn back-btn">‚Üê –ù–∞–∑–∞–¥</button>
            <h2>–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è</h2>

            <div id="register-form-content">
                <form id="register-form" autocomplete="off">
                    <label for="reg-name">–ü—Ä—ñ–∑–≤–∏—â–µ —Ç–∞ –Ü–º'—è:</label>
                    <input type="text" id="reg-name" required placeholder="–ù–∞–ø—Ä: –®–µ–≤—á–µ–Ω–∫–æ –¢–∞—Ä–∞—Å">

                    <div id="email-field-group">
                        <label for="reg-email">Email:</label>
                        <input type="email" id="reg-email">
                    </div>

                    <label for="reg-pass">–ü–∞—Ä–æ–ª—å:</label>
                    <input type="password" id="reg-pass" required>

                    <div id="select-class-wrapper">
                        <label for="reg-class">–û–±–µ—Ä—ñ—Ç—å –≤–∞—à –∫–ª–∞—Å:</label>
                        <select id="reg-class" required>
                            <option value="">-- –û–±–µ—Ä—ñ—Ç—å --</option>
                            <option value="8-–ê">8-–ê</option>
                            <option value="8-–ë">8-–ë</option>
                            <option value="8-–í">8-–í</option>
                            <option value="8-–ì">8-–ì</option>
                        </select>
                    </div>

                    <div id="student-teacher-id-block" class="hidden">
                        <label for="reg-student-teacher-id">ID –í—á–∏—Ç–µ–ª—è (–Ω–∞–ø—Ä. she_tar_55):</label>
                        <input type="text" id="reg-student-teacher-id" placeholder="–í–≤–µ–¥—ñ—Ç—å –∫–æ–¥, —è–∫–∏–π –¥–∞–≤ –≤—á–∏—Ç–µ–ª—å">
                    </div>

                    <div id="register-teacher-key" class="hidden">
                        <label for="teacher-key">–ö–ª—é—á –ê–¥–º—ñ–Ω—ñ—Å—Ç—Ä–∞—Ç–æ—Ä–∞:</label>
                        <input type="password" id="teacher-key">
                    </div>

                    <button type="button" id="register-submit" class="btn primary">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è</button>
                </form>
            </div>

            <div id="register-success" class="card success hidden" style="text-align: center;">
                <h3 style="color: #2ecc71;">‚úÖ –£—Å–ø—ñ—Ö!</h3>
                <div id="new-login-display" style="background: #333; padding: 15px; margin: 20px 0; border-radius: 8px; border: 2px dashed #f1c40f;">
                    </div>
                <button id="btn-go-to-login" class="btn secondary">–ü–µ—Ä–µ–π—Ç–∏ –¥–æ –≤—Ö–æ–¥—É</button>
            </div>
        </div>
    </section>
    
    <section id="screen-student" class="screen dashboard">
        
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3>üßë‚Äçüéì –ö–∞–±—ñ–Ω–µ—Ç –£—á–Ω—è</h3>
            </div>

         <div class="sidebar-profile-info"> 
            <div class="profile-section">
                <div class="avatar-wrapper">
                    <img id="current-user-avatar" src="assets/img/base.png" alt="Avatar" class="main-avatar">
                    
                    <button id="btn-edit-avatar" class="edit-avatar-btn" type="button">
                        ‚úèÔ∏è
                    </button>
                </div>
            </div>

            <h4 id="student-name-display">–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è...</h4>
            <div id="student-class-display" class="class-badge">--</div>
            
            <div class="coin-balance-sidebar">
                üí∞ <span id="student-gold-display">0</span>
            </div>
        </div>

            <nav class="sidebar-nav">
                <button class="menu-item active" data-panel="home">
                    üè† –ì–æ–ª–æ–≤–Ω–∞
                </button>
                <button class="menu-item" data-panel="treasury">
                    üí∞ –°–∫–∞—Ä–±–Ω–∏—Ü—è
                </button>
                
                <button class="menu-item" data-panel="leaderboard">
                    üèÜ –õ—ñ–¥–µ—Ä–±–æ—Ä–¥
                </button>

                <button class="menu-item" data-panel="profile">
                    üë§ –Ü–Ω–≤–µ–Ω—Ç–∞—Ä
                </button>

                <div class="spacer"></div> 

                <button id="logout-student" class="menu-item logout">
                    üö™ –í–∏—Ö—ñ–¥
                </button>
            </nav>
        </aside>

        <main id="student-panel" class="main-panel">
            
            <div id="view-home" class="panel-view active" style="height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center;">
                <div class="game-wrapper" style="width: 100%; max-width: 1200px; text-align: center;">
                    <button id="btn-start-lesson" class="btn-primary" style="padding: 20px 60px; font-size: 1.5em; border-radius: 50px; box-shadow: 0 10px 30px rgba(108, 92, 231, 0.5); transition: transform 0.2s;">
                        ‚ñ∂ –ü–û–ß–ê–¢–ò –£–†–û–ö
                    </button>
                    <div id="unity-container" class="hidden" style="width: 100%; aspect-ratio: 16/9; background: #000; border-radius: 15px; overflow: hidden; box-shadow: 0 20px 60px rgba(0,0,0,0.5); margin-top: 20px;">
                        </div>
                </div>
            </div>

            <div id="view-treasury" class="panel-view hidden">
                <h2 style="text-align:center; margin-bottom:20px;">üí∞ –°–∫–∞—Ä–±–Ω–∏—Ü—è –ì—ñ–ª—å–¥—ñ—ó</h2>
                <div class="treasury-grid">
                    
                    <div class="reward-column">
                        <div class="reward-header">–ú—ñ–∫—Ä–æ-–Ω–∞–≥–æ—Ä–æ–¥–∏</div>
                        <div class="dashed-line"></div>
                        <div id="rewards-micro-list"></div>
                    </div>

                    <div class="reward-column">
                        <div class="reward-header">–°–µ—Ä–µ–¥–Ω—ñ –Ω–∞–≥–æ—Ä–æ–¥–∏</div>
                        <div class="dashed-line"></div>
                        <div id="rewards-medium-list"></div>
                    </div>

                    <div class="reward-column">
                        <div class="reward-header">–í–µ–ª–∏–∫—ñ –Ω–∞–≥–æ—Ä–æ–¥–∏</div>
                        <div class="dashed-line"></div>
                        <div id="rewards-large-list"></div>
                    </div>

                </div>
            </div>

            <div id="view-leaderboard" class="panel-view hidden">
                <div style="text-align: center; margin-top: 50px;">
                    <h2>üèÜ –¢–∞–±–ª–∏—Ü—è –ª—ñ–¥–µ—Ä—ñ–≤</h2>
                    <p>–¢—É—Ç —Å–∫–æ—Ä–æ –∑'—è–≤–∏—Ç—å—Å—è —Ä–µ–π—Ç–∏–Ω–≥ –Ω–∞–π–∫—Ä–∞—â–∏—Ö —É—á–Ω—ñ–≤!</p>
                    <div style="font-size: 50px;">ü•áü•àü•â</div>
                </div>
            </div>

            <div id="view-profile" class="panel-view hidden">
                <h2>üéí –ú—ñ–π –Ü–Ω–≤–µ–Ω—Ç–∞—Ä</h2>
                <ul id="student-inventory-list" class="inventory-list"></ul>
            </div>

        </main>
    </section>

    <section id="screen-teacher" class="screen dashboard">
        <aside class="sidebar">
            <div class="sidebar-header">
                <h3>üßë‚Äçüè´ –í—á–∏—Ç–µ–ª—å—Å—å–∫–∞</h3>
            </div>

            <div class="teacher-sidebar-info">
                <h3 id="panel-teacher-name">–í—á–∏—Ç–µ–ª—å</h3>
                <div class="teacher-id-box">
                    <span>–ú—ñ–π ID:</span>
                    <span id="panel-teacher-code" class="highlight-code">...</span>
                </div>
            </div>

            <nav class="sidebar-nav">
                <button class="menu-item active" data-panel="classes">
                    üë• –ö–ª–∞—Å–∏ / –£—á–Ω—ñ
                </button>
                <button class="menu-item" data-panel="tasks">
                    üìù –†–µ–¥–∞–∫—Ç–æ—Ä –ó–∞–≤–¥–∞–Ω—å
                </button>
                <button id="nav-redaktor-skarbnitsi" class="menu-item" data-panel="treasury-editor">
                    üíé –†–µ–¥–∞–∫—Ç–æ—Ä –°–∫–∞—Ä–±–Ω–∏—Ü—ñ
                </button>
                <button class="menu-item" data-panel="analytics">
                    üìä –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞
                </button>
                
                <div class="spacer"></div> <button id="logout-teacher" class="menu-item logout">
                    üö™ –í–∏—Ö—ñ–¥
                </button>
            </nav>
        </aside>

        <main id="teacher-panel" class="main-panel">
             <div id="view-classes" class="panel-view active">
                <div id="teacher-content">
                    </div>
            </div>
             
            <div id="view-tasks" class="panel-view hidden">
                <div class="sidebar-profile-info"></div>
                <h2 style="text-align:center; color: var(--accent-gold);">üóùÔ∏è –ù–∞–ø–æ–≤–Ω–µ–Ω–Ω—è –õ–∞–±—ñ—Ä–∏–Ω—Ç—É</h2>
                <p style="text-align:center;">–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –ø—Ä–∏–∫–ª–∞–¥–∏ –¥–ª—è –∫–æ–∂–Ω–∏—Ö –¥–≤–µ—Ä–µ–π —É –ª–∞–±—ñ—Ä–∏–Ω—Ç—ñ.</p>
                
                <div class="card-content" style="max-width: 900px; margin: 0 auto; background: #222; color: white;">
                    
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px; border-bottom: 1px dashed #555; padding-bottom: 15px;">
                        <div>
                            <label style="color: var(--accent-gold);">üí∞ –ù–∞–≥–æ—Ä–æ–¥–∞ –∑–∞ —Ä—ñ–≤–µ–Ω—å:</label>
                            <input type="number" id="maze-global-reward" value="100" style="width: 100px; background: #333; color: white; border: 1px solid #555; text-align: center;">
                        </div>
                        <div style="font-size: 0.9em; color: #aaa;">
                            –ü–æ—Ç–æ—á–Ω–∏–π —Ä—ñ–≤–µ–Ω—å: <strong>–õ–∞–±—ñ—Ä–∏–Ω—Ç 1 (3 –î–≤–µ—Ä–µ–π)</strong>
                        </div>
                    </div>

                    <div id="maze-doors-container" style="display: flex; flex-direction: column; gap: 15px;">
                        </div>

                    <button id="btn-save-maze-config" class="btn" style="background-color: #27ae60; color: white; margin-top: 30px; font-size: 1.2em;">
                        üíæ –ó–ë–ï–†–ï–ì–¢–ò –ö–û–ù–§–Ü–ì–£–†–ê–¶–Ü–Æ
                    </button>
                    <p id="maze-save-status" style="margin-top: 10px; color: var(--accent-green); display: none; text-align: center;">‚úÖ –î–∞–Ω—ñ –∑–∞–ø–∏—Å–∞–Ω–æ! –ó–∞–ø—É—Å—Ç—ñ—Ç—å –≥—Ä—É.</p>
                </div>
            </div>

             <div id="view-treasury-editor" class="panel-view hidden">
                <div id="treasury-content"></div>
            </div>

             <div id="view-analytics" class="panel-view hidden">
                 <h2>–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –ø—Ä–æ–≥—Ä–µ—Å—É</h2>
                 <p>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —É—Å–ø—ñ—à–Ω–æ—Å—Ç—ñ.</p>
             </div>
        </main>
    </section>

    <div id="avatar-modal-container"></div>

    <script type="module" src="src/firebase.js"></script>
    <script type="module" src="src/router.js"></script>
</body>
</html>